<div class="px-5 rounded-lg drop-shadow-md mb-10 text-sm">
    <div class="static bg-white rounded-lg p-5">
        <div class="grid grid-cols-3 gap-4 p-4">
            <div class="flex">
                <a routerLink="/my-document"
                    class="text-regal-blue p-2 rounded-lg focus:bg-regal-blue focus:text-white border border-regal-blue hover:bg-regal-blue hover:text-white hover:border-white">
                    <fa-icon [icon]="faArrowLeft" class="mr-1"></fa-icon> Back</a>
            </div>
            <h1 class="text-lg font-semibold text-gray-900 text-center max-[600px]:hidden">View SP Document</h1>
        </div>
        <div class="min-[600px]:grid min-[600px]:grid-cols-2 min-[600px]:gap-4">
            <div class="form-control w-full px-4 py-1">
                <label class="label">
                    <span class="label-text text-gray-900">Sender Nopeg</span>
                </label>
                <input type="text"
                    [value]="data.sender_personal_number == '' || data.sender_personal_number == null ? '-' : data.sender_personal_number"
                    disabled
                    class="bg-gray-100 rounded-lg text-gray-900 w-full px-4 py-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500" />
            </div>
            <div class="form-control w-full px-4 py-1">
                <label class="label">
                    <span class="label-text text-gray-900">Sender Name</span>
                </label>
                <input type="text"
                    [value]="data.sender_personal_name == '' || data.sender_personal_name == null ? '-' : data.sender_personal_name"
                    disabled
                    class="bg-gray-100 rounded-lg text-gray-900 w-full px-4 py-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500" />
            </div>
            <div class="form-control w-full px-4 py-1">
                <label class="label">
                    <span class="label-text text-gray-900">Sender Unit</span>
                </label>
                <input type="text" [value]="data.sender_unit == '' || data.sender_unit == null ? '-' : data.sender_unit"
                    disabled
                    class="bg-gray-100 rounded-lg text-gray-900 w-full px-4 py-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500" />
            </div>
            <div class="form-control w-full px-4 py-1">
                <label class="label">
                    <span class="label-text text-gray-900">Sender Date</span>
                </label>
                <input type="date"
                    [value]="data.sender_date == '' || data.sender_date == null ? null : data.sender_date" disabled
                    class="bg-gray-100 rounded-lg text-gray-900 w-full px-4 py-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500" />
            </div>
            <hr class="mt-5 min-[600px]:mb-5">
            <hr class="min-[600px]:mt-5 mb-5">
            <div class="form-control w-full px-4 py-1">
                <label class="label">
                    <span class="label-text text-gray-900">Receiver Nopeg</span>
                </label>
                <input type="text"
                    [value]="data.receiver_personal_number == '' || data.receiver_personal_number == null ? '-' : data.receiver_personal_number"
                    disabled
                    class="bg-gray-100 rounded-lg text-gray-900 w-full px-4 py-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500" />
            </div>
            <div class="form-control w-full px-4 py-1">
                <label class="label">
                    <span class="label-text text-gray-900">Receiver Name</span>
                </label>
                <input type="text"
                    [value]="data.receiver_personal_name == '' || data.receiver_personal_name == null ? '-' : data.receiver_personal_name"
                    disabled
                    class="bg-gray-100 rounded-lg text-gray-900 w-full px-4 py-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500" />
            </div>
            <div class="form-control w-full px-4 py-1">
                <label class="label">
                    <span class="label-text text-gray-900">Receiver Unit</span>
                </label>
                <input type="text"
                    [value]="data.receiver_unit == '' || data.receiver_unit == null ? '-' : data.receiver_unit" disabled
                    class="bg-gray-100 rounded-lg text-gray-900 w-full px-4 py-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500" />
            </div>
            <div class="form-control w-full px-4 py-1">
                <label class="label">
                    <span class="label-text text-gray-900">Receiver Date</span>
                </label>
                <input type="date" [value]="data.receiver_date == null ? null : data.receiver_date" disabled
                    class="bg-gray-100 rounded-lg text-gray-900 w-full px-4 py-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500" />
            </div>
        </div>
        <div class="px-4 mt-10">
            <div class="row overflow-x-auto">
                <table class="mt-10 min-w-full">
                    <thead>
                        <tr class="bg-soft-blue text-gray-900">
                            <th class="py-3 px-5 whitespace-nowrap">No.</th>
                            <th class="py-3 px-5 whitespace-nowrap">QTY</th>
                            <th class="py-3 px-5 whitespace-nowrap">Description</th>
                            <th class="py-3 px-5 whitespace-nowrap">Remark</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white">
                        <tr class="bg-white text-gray-900"
                            *ngFor="let row of data.spdoc_description_remarks; let i = index">
                            <td class="py-2 text-center px-5 whitespace-nowrap">{{ i + 1 }}</td>
                            <td class="py-2 text-center px-5 whitespace-nowrap">{{ row.quantity }}</td>
                            <td class="py-2 text-left px-5 whitespace-nowrap">{{ row.description }}</td>
                            <td class="py-2 text-left px-5 whitespace-nowrap">{{ row.remark }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="px-4 mt-5">
            <h1 class="min-[600px]:text-2xl max-[600px]:text-lg font-semibold">Evidence Receiver</h1>
            <img class="mt-3" *ngIf="data.file_location"
                [src]="'http://172.16.41.107:8322/v1/api/media/preview/'+data.file_location" alt="evidence">
            <h1 *ngIf="!data.file_location" class="text-danger">Evidence is empty!</h1>
        </div>
        <div class="flex justify-center mt-10">
            <button type="button"
                *ngIf="status == 'Open' && data.sender_personal_number != personal_number && data.receiver_unit == mform.get('receiver_unit_p')?.value"
                (click)="receiveSP(id)"
                class="text-center max-[600px]:w-screen h-12 text-regal-blue p-2 rounded-lg focus:bg-regal-blue focus:text-white border border-regal-blue hover:bg-regal-blue hover:text-white hover:border-white">
                <fa-icon [icon]="faCircleCheck" class="mr-1"></fa-icon> Receive</button>
            <a [routerLink]="'/edit-spdocument/'+data.id_sp_data"
                class="mx-1 text-center max-[600px]:w-screen mb-5 text-regal-blue p-2 rounded-lg focus:bg-regal-blue focus:text-white border border-regal-blue hover:bg-regal-blue hover:text-white hover:border-white"
                *ngIf="sender_number == personal_number"><fa-icon [icon]="faPencil"></fa-icon> Edit</a>
            <button type="button" (click)="showDocumentPDF(data.id_sp_data)" data-bs-toggle="modal"
                data-bs-target="#exampleModalXl"
                class="mx-1 text-center max-[600px]:w-screen mb-5 text-regal-blue p-2 rounded-lg focus:bg-regal-blue focus:text-white border border-regal-blue hover:bg-regal-blue hover:text-white hover:border-white">
                <fa-icon [icon]="faFilePdf"></fa-icon> See Letter
            </button>
        </div>
    </div>
</div>

<!-- PDF Desktop VIew -->
<div class="modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto"
    id="exampleModalXl" tabindex="-1" aria-labelledby="exampleModalXlLabel" aria-modal="true" role="dialog">
    <div class="modal-dialog modal-xl relative w-auto pointer-events-none">
        <div
            class="modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current">
            <div
                class="modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md">
                <h5 class="text-xl font-medium leading-normal text-gray-800" id="exampleModalXlLabel">
                    <fa-icon [icon]="faFilePdf" class="mr-1" style="color: #006298"></fa-icon>
                    See Letter
                </h5>
                <button type="button"
                    class="btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline"
                    data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body relative p-4" id="htmlData">
                <div class="bg-white rounded-lg mt-5 px-5">
                    <div>
                        <div class="grid grid-cols-2 gap-4">
                            <!-- ... -->
                            <div class="col-start-1">
                                <img [src]="link_image" class="w-3/4" alt="icon-gmf" />
                            </div>
                            <!-- ... -->
                            <div class="col-end-7">
                                <div class="flex">
                                    <h1 class="text-right flex">
                                        NO. SP
                                        <h1 class="ml-5 font-bold text-right">{{ sp_no }}</h1>
                                    </h1>
                                </div>
                                <h1 class="font-bold mt-2 underline underline-offset-8">
                                    SURAT PENGIRIMAN
                                </h1>
                                <h1 class="mt-0">Shipping Document</h1>
                            </div>
                        </div>
                        <div class="grid grid-cols-10 gap-0 mt-1">
                            <div>
                                <div class="flex w-fit">
                                    <div class="grid flex">
                                        <h1 class="mt-2 underline underline-offset-8 flex">
                                            Kepada
                                        </h1>
                                    </div>
                                </div>
                                <h1 class="mt-0">To</h1>
                                <div class="flex">
                                    <div class="grid flex">
                                        <h1 class="mt-2 underline underline-offset-8 flex">
                                            Dikirim oleh
                                        </h1>
                                    </div>
                                </div>
                                <h1 class="mt-0 w-fit">Sent By</h1>
                            </div>
                            <div class="w-80">
                                <div class="flex">
                                    <div class="grid grid-cols-2 gap-4">
                                        <h1 class="mt-2 font-bold">: {{ receiver }}</h1>
                                    </div>
                                </div>
                                <div class="flex">
                                    <div class="grid grid-cols-2 gap-4">
                                        <h1 class="mt-8 font-bold">: {{ sender }}</h1>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3">
                            <div class="flex flex-col">
                                <div class="overflow-x-auto sm:-mx-6 lg:-mx-8">
                                    <div class="py-2 inline-block min-w-full sm:px-6 lg:px-8">
                                        <div class="overflow-hidden">
                                            <table class="min-w-full border border-3 border-black text-center">
                                                <thead class="border border-3 border-black">
                                                    <tr class="mb-3">
                                                        <th scope="col"
                                                            class="border border-3 border-black text-sm font-medium text-gray-900 px-6 py-2 border-r">
                                                            <h1 class="font-bold underline underline-offset-8">
                                                                Tanggal
                                                            </h1>
                                                            <h1 class="font-bold mt-2">Date</h1>
                                                        </th>
                                                        <th scope="col"
                                                            class="border border-3 border-black text-sm font-medium text-gray-900 px-6 py-2 border-r">
                                                            <h1 class="font-bold underline underline-offset-8">
                                                                Banyaknya
                                                            </h1>
                                                            <h1 class="font-bold mt-2">Quantity</h1>
                                                        </th>
                                                        <th scope="col"
                                                            class="border border-3 border-black text-sm font-medium text-gray-900 px-6 py-2 border-r">
                                                            <h1 class="font-bold underline underline-offset-8">
                                                                Macam dari barang barang
                                                            </h1>
                                                            <h1 class="font-bold mt-2">
                                                                Description of goods
                                                            </h1>
                                                        </th>
                                                        <th scope="col"
                                                            class="border border-3 border-black text-sm font-medium text-gray-900 px-6 py-2">
                                                            <h1 class="font-bold underline underline-offset-8">
                                                                Keterangan
                                                            </h1>
                                                            <h1 class="font-bold mt-2">Remark</h1>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="border border-3 border-black"
                                                        *ngFor="let row of data_pdf">
                                                        <td
                                                            class="font-bold border border-3 border-black px-6 py-2 whitespace-nowrap text-sm font-medium text-gray-900 border-r">
                                                            <h1 class="">
                                                                {{ row.created_at | date : "longDate" }}
                                                            </h1>
                                                        </td>
                                                        <td
                                                            class="font-bold border border-3 border-black text-sm text-gray-900 font-light px-6 py-2 border-r">
                                                            <h1 class="">{{ row.quantity }}</h1>
                                                        </td>
                                                        <td
                                                            class="font-bold border border-3 border-black text-sm text-gray-900 font-light px-6 py-2 border-r text-justify">
                                                            <h1 class="">{{ row.description }}</h1>
                                                        </td>
                                                        <td
                                                            class="font-bold border border-3 border-black text-sm text-gray-900 font-light px-6 py-2 text-justify">
                                                            <h1 class="">{{ row.remark }}</h1>
                                                        </td>
                                                    </tr>
                                                    <tr class="border border-3 border-black">
                                                        <td
                                                            class="border border-3 border-black px-6 py-2 text-sm font-medium text-gray-900 border-r">
                                                        </td>
                                                        <td
                                                            class="border border-3 border-black text-sm text-gray-900 font-light px-6 py-2 border-r">
                                                        </td>
                                                        <td
                                                            class="border border-3 border-black text-sm text-gray-900 font-light px-6 py-2 border-r">
                                                            <div class="grid grid-cols-3">
                                                                <div class="col-start-1 w-54">
                                                                    <div class="w-54">
                                                                        <div class="grid grid-cols-1">
                                                                            <h1
                                                                                class="col-start-1 mt-2 underline underline-offset-8 flex font-bold">
                                                                                Dikirim oleh
                                                                            </h1>
                                                                            <h1 class="col-end-7 mt-2 flex ml-5">
                                                                                :
                                                                            </h1>
                                                                        </div>
                                                                    </div>
                                                                    <div class="w-54">
                                                                        <div class="grid grid-cols-1">
                                                                            <h1 class="col-start-1 mt-2 flex">
                                                                                Packed by
                                                                            </h1>
                                                                            <h1 class="col-end-7 mt-2 flex ml-11">
                                                                                :
                                                                            </h1>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="">
                                                                    <h1 class="mt-2 ml-1 font-bold w-fit">
                                                                        {{ sender_name }}
                                                                    </h1>
                                                                    <h1 class="mt-2 ml-1 mb-3 w-fit">
                                                                        {{ sender_number }}
                                                                    </h1>
                                                                </div>
                                                                <div class="flex mt-0">
                                                                    <ngx-barcode *ngIf="sender_number"
                                                                        [bc-value]="sender_number" [bc-height]="60"
                                                                        [bc-display-value]="false"></ngx-barcode>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td
                                                            class="border border-3 border-black text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <div class="grid grid-cols-4 mt-1 w-fit">
                                                <div class="columns-1">
                                                    <div class="grid grid-cols-1">
                                                        <h1
                                                            class="col-start-1 mt-2 underline underline-offset-8 flex font-bold w-fit">
                                                            Penerima
                                                        </h1>
                                                        <h1 class="col-end-4 mt-2 flex">:</h1>
                                                    </div>
                                                    <div class="grid grid-cols-1">
                                                        <h1 class="col-start-1 mt-2 flex w-fit">
                                                            Received
                                                        </h1>
                                                        <h1 class="col-end-4 mt-2 flex">:</h1>
                                                    </div>
                                                </div>
                                                <div class="columns-1">
                                                    <ngx-barcode *ngIf="receive_number" [bc-value]="receive_number"
                                                        [bc-height]="50" [bc-margin]="5"
                                                        [bc-display-value]="false"></ngx-barcode>
                                                    <h1 class="mt-2 mb-5 ml-1">
                                                        {{
                                                        receive_name == "" ? "Not Received" : receive_name
                                                        }}
                                                        /
                                                        {{
                                                        receive_number == ""
                                                        ? "Not Received"
                                                        : receive_number
                                                        }}
                                                    </h1>
                                                </div>
                                            </div>
                                            <div class="flex">
                                                <div class="grid grid-cols-2 gap-4">
                                                    <h1
                                                        class="col-start-1 mt-2 underline underline-offset-8 flex font-bold">
                                                        Tanggal
                                                    </h1>
                                                    <h1 class="col-end-5 mt-2 flex font-bold">:</h1>
                                                </div>
                                                <h1 class="mt-2 ml-3">
                                                    {{ sender_date | date : "longDate" }}
                                                </h1>
                                            </div>
                                            <h1 class="mt-0 mb-10">Date</h1>
                                            <h1 class="mt-5 mb-5">GMF/A-111</h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer text-center">
                <hr />
                <button type="button" (click)="openPDF()"
                    class="bg-regal-blue text-white rounded p-2 mb-5 mt-2 hover:bg-white hover:text-regal-blue hover:border hover:border-regal-blue border">
                    <fa-icon [icon]="faCircleDown" class="mr-1"></fa-icon> Download
                </button>
            </div>
        </div>
    </div>
</div>